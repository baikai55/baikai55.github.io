"use strict";(self["webpackJsonp_greenchannel"]=self["webpackJsonp_greenchannel"]||[]).push([[697],{7227:function(e,t,a){a.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,40],total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],n={name:"paginAtion",props:{total:{default:()=>{},type:Number},page:{type:Number,default:()=>{}},pageSizes:{type:Number,default:10},background:{type:Boolean,default:!0}},data(){return{currentPage:1,pageSize:10}},methods:{handleSizeChange(e){this.$emit("handleSizeChange",{pageSize:e,currentPage:this.currentPage})},handleCurrentChange(e){this.$emit("handleCurrentChange",{currentPage:e,pageSize:this.pageSize}),console.log(this.currentPage,"currentPagecurrentPage")}}},l=n,o=a(1001),s=(0,o.Z)(l,i,r,!1,null,"0d273146",null),c=s.exports},5983:function(e,t,a){a.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{ref:"content",staticClass:"table-content"},[t("el-table",{ref:"table",attrs:{data:e.table.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"empty-text":"暂无数据~",border:"",height:e.tableHeightComputed}},[e._l(e.table.header,(function(a,i){return[a.selection?[t("el-table-column",{key:i,attrs:{type:"selection",width:a.width,"min-width":a.minWidth,align:"center"}})]:a.dia?[t("el-table-column",{key:i,attrs:{prop:a.prop,label:a.label,width:a.width,fixed:a.fixed,"min-width":a.minWidth,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return e._l(a.tableOption,(function(r,n){return t("el-button",{key:n,attrs:{type:r.type},on:{click:function(t){return e.openDia(r.methods,i.row[a.prop])}}},[e._v(" "+e._s(r.label)+" ")])}))}}],null,!0)})]:a.status?t("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(e._f("changeStatus")(i.row[a.prop],a.filters)))])]}}],null,!0)}):a.color?[t("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{style:`background-color:${i.row[a.prop]};`},[e._v(" "+e._s(i.row[a.prop])+" ")])]}}],null,!0)})]:a.colorBtn?[t("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return e._l(a.tableOption,(function(r,n){return t("el-button",{key:n,attrs:{type:e.changeType(i.row[a.prop]),size:r.size}},[e._v(e._s(e._f("changeStatus")(i.row[a.prop],a.filters)))])}))}}],null,!0)})]:a.control?[t("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return e._l(a.tableOption,(function(a,r){return t("el-button",{key:r,attrs:{type:a.type,size:a.size},on:{click:function(t){return e.handButton(a.methods,i.row,i.$index)}}},[e._v(" "+e._s(a.label)+" ")])}))}}],null,!0)})]:[t("el-table-column",{key:i,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"}})]]}))],2)],1)},r=[],n={props:{table:{type:Object,required:!0},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},data(){return{itemHeaderHeight:"",tableHeight:""}},filters:{changeStatus(e,t){return"function"===typeof t?t(e):e}},computed:{tableHeightComputed(){return this.tableHeight-this.itemHeaderHeight}},mounted(){addEventListener("resize",this.resize)},beforeDestroy(){removeEventListener("resize",this.resize)},created(){this.$nextTick((()=>{let e=document.documentElement.clientHeight,t=this.$refs.table.$el.getBoundingClientRect().top;this.tableHeight=e-t-60,console.log(e,t,this.tableHeight,"itemheightbheight")}))},methods:{resize(){let e=document.documentElement.clientHeight,t=this.$refs.table.$el.getBoundingClientRect().top;this.tableHeight=e-t-60,console.log(e,t,this.tableHeight,"itemheightbheight")},handButton(e,t,a){this.$emit("handButton",{methods:e,row:t,index:a})},openDia(e,t){this.$emit("openDia",t)},changeType(e){return 0==e?"danger":"success"}}},l=n,o=a(1001),s=(0,o.Z)(l,i,r,!1,null,"8499fac4",null),c=s.exports},9697:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var i=function(){var e=this,t=e._self._c;return t("div",[e._m(0),t("div",{staticClass:"app-control-nav"},[t("div",{staticClass:"table-control-search"},[t("el-form",{ref:"searchFrom",attrs:{model:e.searchFrom,inline:""}},[t("div",{staticClass:"search-left"},[t("el-form-item",{attrs:{prop:"searchTime",label:"业务名称："}},[t("el-input",{model:{value:e.searchFrom.userid,callback:function(t){e.$set(e.searchFrom,"userid",t)},expression:"searchFrom.userid"}})],1),t("el-form-item",{attrs:{prop:"searchTime",label:"所属团队："}},[t("el-input",{model:{value:e.searchFrom.userid,callback:function(t){e.$set(e.searchFrom,"userid",t)},expression:"searchFrom.userid"}})],1)],1),t("div",{staticClass:"search-right"},[t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"}},[e._v("查询业务")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.openDia}},[e._v("添加业务")])],1)],1)])],1)]),t("div",{staticClass:"table-control-main"},[e._m(1),t("TableComponent",{ref:"table",attrs:{table:e.table},on:{handButton:e.handButton,openDia:e.openDia}})],1),t("div",{staticClass:"paga"},[t("PaginationComponentVue",{attrs:{total:e.pagation.total,page:e.pagation.page,pageSizes:e.pagation.pageSizes},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),t("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"min-dialog",attrs:{title:e.title,visible:e.dialogVisible,"before-close":e.handleClose,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"createSearchFrom",attrs:{"label-width":"120px",model:e.createSearchFrom,size:"mini"}},[t("el-form-item",{attrs:{label:"业务类型名称：",prop:"app_code"}},[t("el-input",{model:{value:e.createSearchFrom.app_code,callback:function(t){e.$set(e.createSearchFrom,"app_code",t)},expression:"createSearchFrom.app_code"}})],1),t("el-form-item",{attrs:{label:"所属团队名称：",prop:"name"}},[t("el-input",{model:{value:e.createSearchFrom.name,callback:function(t){e.$set(e.createSearchFrom,"name",t)},expression:"createSearchFrom.name"}})],1),t("el-form-item",{attrs:{label:"业务信息提示：",prop:"app_id"}},[t("el-input",{model:{value:e.createSearchFrom.app_id,callback:function(t){e.$set(e.createSearchFrom,"app_id",t)},expression:"createSearchFrom.app_id"}})],1),t("el-form-item",{attrs:{label:"当前业务状态：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1),t("el-form-item",{attrs:{label:"图片是否上传：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1),t("el-form-item",{attrs:{label:"金额是否填写：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1),t("el-form-item",{attrs:{label:"币种是否选择：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1),t("el-form-item",{attrs:{label:"编码是否填写：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1),t("el-form-item",{attrs:{label:"备注是否填写：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1),t("el-form-item",{attrs:{label:"申请消息标题：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1),t("el-form-item",{attrs:{label:"申请消息描述：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1),t("el-form-item",{attrs:{label:"审核消息标题：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1),t("el-form-item",{attrs:{label:"审核消息描述：",prop:"status"}},[t("el-input",{model:{value:e.createSearchFrom.status,callback:function(t){e.$set(e.createSearchFrom,"status",t)},expression:"createSearchFrom.status"}})],1)],1),t("el-dialog",{attrs:{width:"30%",title:"确认",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[t("p",[e._v(e._s(e.confirmMsg))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){e.innerVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.sendConfirm}},[e._v("确 定")])],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"info"},on:{click:e.createCancel}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.innerVisible=!0}}},[e._v("确 定")])],1)],1)],1)},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-control-header"},[t("p",[e._v("查询条件")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"m_text"},[t("p",[e._v("业务维护")])])}],n=a(7227),l=a(5983),o=a(4471),s=a(2207),c={components:{TableComponent:l.Z,PaginationComponentVue:n.Z},directives:{elDragDialog:s.Z},data(){return{innerVisible:!1,confirmMsg:"",title:"",createSearchFrom:{app_code:"",app_id:"",status:"",name:""},searchFrom:{searchTime:"",searchStart:"",searchPhone:"",userId:"",checkMana:""},propsMsg:"",dialogVisible:!1,pagation:{total:0,page:1,pageSizes:10},table:{tableData:[],header:[{prop:"app_code",label:"业务类型名称",minWidth:"140px"},{prop:"app_name",label:"所属团队名称",minWidth:"140px"},{label:"业务信息提示",minWidth:"140px"},{label:"当前业务状态",minWidth:"140px"},{label:"图片是否上传",minWidth:"140px"},{label:"金额是否填写",minWidth:"140px"},{label:"币种是否选择",minWidth:"140px"},{label:"编码是否填写",minWidth:"140px"},{label:"备注是否填写",minWidth:"140px"},{label:"申请消息标题",minWidth:"140px"},{label:"申请消息描述",minWidth:"140px"},{label:"处理消息标题",minWidth:"140px"},{label:"处理消息描述",minWidth:"140px"},{label:"最后操作人员",minWidth:"140px"},{label:"最后操作时间",minWidth:"140px"},{label:"操作",minWidth:"170px",fixed:"right",control:!0,tableOption:[{type:"text",label:"更新业务",size:"mini",methods:"seeMaintain"},{type:"text",label:"删除业务",size:"mini",methods:"deleteMaintain"}]}]}}},mounted(){},created(){this.getTableData()},filters:{changeStatus(e){return console.log(e,"val"),e}},methods:{sendConfirm(){this.innerVisible=!1,this.dialogVisible=!1,this.resetForm()},createConfirm(){this.innerVisible=!0},createCancel(){this.dialogVisible=!1,this.resetForm()},openDia(e){if(this.dialogVisible=!0,e){this.title="更新权限",this.disabled=!0,this.confirmMsg="是否确认更新权限?";const{app_code:t,app_id:a,status:i,name:r}=e;this.createSearchFrom={app_code:t,app_id:a,status:i,name:r}}else this.title="添加权限",this.confirmMsg="是否确认添加权限?"},handleClose(e){this.$confirm("确认关闭？").then((()=>{e(),this.resetForm()})).catch((()=>{}))},resetForm(){this.disabled=!1,this.createSearchFrom={app_code:"",app_id:"",status:"",name:""}},handleSizeChange(e){console.log(e,"handleSizeChange")},handleCurrentChange(e){console.log(e,"handleCurrentChange")},handButton(e){if("seeMaintain"===e.methods)this.openDia(e.row),console.log("查看");else{if("deleteMaintain"!==e.methods)return;{console.log(e.index,"删除");const t=this.$createElement;this.$msgbox({title:"提示",type:"warning",message:t("p",null,[t("span",{style:"color: red"},"!!!"),t("span",null,"此操作将永久删除该数据, 是否继续?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{this.delete(e.index),this.$message({type:"success",message:"删除成功!"})})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}console.log(e)},delete(e){this.table.tableData.splice(e,1)},getTableData(){o.Z.get("/api/appcontrol/getdata").then((e=>{this.pagation.total=e.data.data.length,this.table.tableData=e.data.data,console.log(this.table.tableData,"this.tableData")}))}}},p=c,u=a(1001),d=(0,u.Z)(p,i,r,!1,null,null,null),h=d.exports},2207:function(e,t,a){a.d(t,{Z:function(){return l}});a(6699);var i={bind(e,t,a){const i=e.querySelector(".el-dialog__header"),r=e.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",r.style.cssText+=";top:0px;";const n=function(){return window.document.currentStyle?(e,t)=>e.currentStyle[t]:(e,t)=>getComputedStyle(e,!1)[t]}();i.onmousedown=e=>{const t=e.clientX-i.offsetLeft,l=e.clientY-i.offsetTop,o=r.offsetWidth,s=r.offsetHeight,c=document.body.clientWidth,p=document.body.clientHeight,u=r.offsetLeft,d=c-r.offsetLeft-o,h=r.offsetTop,m=p-r.offsetTop-s;let f=n(r,"left"),g=n(r,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/%/g,"")/100)):(f=+f.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){let i=e.clientX-t,n=e.clientY-l;-i>u?i=-u:i>d&&(i=d),-n>h?n=-h:n>m&&(n=m),r.style.cssText+=`;left:${i+f}px;top:${n+g}px;`,a.child.$emit("dragDialog")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}}},r=a(6369);const n=function(e){e.directive("el-drag-dialog",i)};window.Vue&&(window["el-drag-dialog"]=i,r["default"].use(n)),i.install=n;var l=i}}]);