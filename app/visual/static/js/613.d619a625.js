"use strict";(self["webpackJsonp_visual"]=self["webpackJsonp_visual"]||[]).push([[613],{7227:function(e,t,a){a.d(t,{Z:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,40],total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],i={name:"paginAtion",props:{total:{default:()=>{},type:Number},page:{type:Number,default:()=>{}},pageSizes:{type:Number,default:10},background:{type:Boolean,default:!0}},data(){return{currentPage:1,pageSize:10}},methods:{handleSizeChange(e){this.$emit("handleSizeChange",{pageSize:e,currentPage:this.currentPage})},handleCurrentChange(e){this.$emit("handleCurrentChange",{currentPage:e,pageSize:this.pageSize}),console.log(this.currentPage,"currentPagecurrentPage")}}},r=i,o=a(1001),s=(0,o.Z)(r,l,n,!1,null,"0d273146",null),u=s.exports},4332:function(e,t,a){a.d(t,{Z:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-content"},[t("el-table",{ref:"table",attrs:{data:e.table.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"empty-text":"暂无数据~",border:"",height:e.tableHeightComputed}},[e._l(e.table.header,(function(a,l){return[a.selection?[t("el-table-column",{key:l,attrs:{type:"selection",width:a.width,"min-width":a.minWidth,align:"center"}})]:a.dia?[t("el-table-column",{key:l,attrs:{prop:a.prop,label:a.label,width:a.width,fixed:a.fixed,"min-width":a.minWidth,align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return e._l(a.tableOption,(function(n,i){return t("el-button",{key:i,attrs:{type:n.type},on:{click:function(t){return e.openDia(n.methods,l.row[a.prop])}}},[e._v(" "+e._s(n.label)+" ")])}))}}],null,!0)})]:a.status?t("el-table-column",{key:l,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",[e._v(e._s(e._f("changeStatus")(l.row[a.prop],a.filters)))])]}}],null,!0)}):a.color?[t("el-table-column",{key:l,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{style:`background-color:${l.row[a.prop]};`},[e._v(" "+e._s(l.row[a.prop])+" ")])]}}],null,!0)})]:a.colorBtn?[t("el-table-column",{key:l,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return e._l(a.tableOption,(function(n,i){return t("el-button",{key:i,attrs:{round:n.round,type:e.changeType(l.row[a.prop],n.filters),size:n.size}},[e._v(e._s(e._f("changeStatus")(l.row[a.prop],a.filters)))])}))}}],null,!0)})]:a.control?[t("el-table-column",{key:l,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return e._l(a.tableOption,(function(a,n){return t("el-button",{key:n,attrs:{type:a.type,size:a.size},on:{click:function(t){return e.handButton(a.methods,l.row,l.$index)}}},[e._v(" "+e._s(a.label)+" ")])}))}}],null,!0)})]:[t("el-table-column",{key:l,attrs:{prop:a.prop,label:a.label,"min-width":a.minWidth,width:a.width,fixed:a.fixed,align:"center"}})]]}))],2)],1)},n=[],i={props:{table:{type:Object,required:!0},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},data(){return{itemHeaderHeight:"",tableHeight:""}},filters:{changeStatus(e,t){return"function"===typeof t?t(e):e}},computed:{tableHeightComputed(){return this.tableHeight-this.itemHeaderHeight}},watch:{itemHeaderHeight(){this.resize()}},mounted(){addEventListener("resize",this.resize)},beforeDestroy(){removeEventListener("resize",this.resize)},created(){this.$nextTick((()=>{let e=document.documentElement.clientHeight,t=this.$refs.table.$el.getBoundingClientRect().top;this.tableHeight=e-t-60,console.log(e,t,this.tableHeightC,"itemheightbheight")}))},methods:{resize(){let e=document.documentElement.clientHeight,t=this.$refs.table.$el.getBoundingClientRect().top;this.tableHeight=e-t-60},handButton(e,t,a){this.$emit("handButton",{methods:e,row:t,index:a})},openDia(e,t){this.$emit("openDia",t)},changeType(e,t){return"function"===typeof t?t(e):e}}},r=i,o=a(1001),s=(0,o.Z)(r,l,n,!1,null,"71bad966",null),u=s.exports},613:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",[e._m(0),t("div",{staticClass:"app-control-nav"},[t("div",{staticClass:"table-control-search"},[t("el-form",{ref:"searchFrom",attrs:{model:e.searchFrom,inline:""}},[t("el-form-item",{attrs:{prop:"searchTime",label:"系统模块："}},[t("el-input",{model:{value:e.searchFrom.userid,callback:function(t){e.$set(e.searchFrom,"userid",t)},expression:"searchFrom.userid"}})],1),t("el-form-item",{attrs:{prop:"searchTime",label:"操作人员："}},[t("el-input",{model:{value:e.searchFrom.userid,callback:function(t){e.$set(e.searchFrom,"userid",t)},expression:"searchFrom.userid"}})],1),t("el-form-item",{attrs:{prop:"searchTime",label:"操作类型："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:"searchTime",label:"操作状态："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"操作时间：",prop:""}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),t("div",{staticClass:"search-right"},[t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"}},[e._v("搜索")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh"}},[e._v("重置")])],1)],1)],1)],1)]),t("div",{staticClass:"table-control-main"},[e._m(1),t("TableComponent",{ref:"table",attrs:{table:e.table},on:{handButton:e.handButton,openDia:e.openDia}})],1),t("div",{staticClass:"paga"},[t("PaginationComponentVue",{attrs:{total:e.pagation.total,page:e.pagation.page,pageSizes:e.pagation.pageSizes},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("span",[e._v(e._s(e.propsMsg))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-control-header"},[t("p",[e._v("查询条件")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"m_text"},[t("p",[e._v("操作日志")])])}],i=a(7227),r=a(4332),o=a(4471),s={components:{TableComponent:r.Z,PaginationComponentVue:i.Z},data(){return{options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],value:"",value1:"",searchFrom:{searchTime:"",searchStart:"",searchPhone:"",userId:"",start_time:"",end_time:""},propsMsg:"",dialogVisible:!1,pagation:{total:0,page:1,pageSizes:10},table:{tableData:[],header:[{prop:"app_code",minWidth:"140px",label:"日志编号 "},{prop:"app_name",minWidth:"140px",label:"系统模块 "},{prop:"status",minWidth:"140px",label:"操作类型 ",colorBtn:!0,tableOption:[{size:"mini",round:!0,filters:e=>"danger"}],filters:e=>0==e?"清除数据":"强退"},{minWidth:"140px",label:"操作人员 "},{minWidth:"140px",label:"部门名称 "},{minWidth:"140px",label:"主机"},{minWidth:"140px",label:"操作地点 "},{prop:"status",minWidth:"140px",label:"操作状态 ",colorBtn:!0,tableOption:[{size:"mini",round:!0,filters:e=>0==e?"danger":"success"}],filters:e=>0==e?"失败":"成功"},{minWidth:"140px",label:"操作时间 "},{minWidth:"140px",label:"操作",control:!0,fixed:"right",tableOption:[{type:"text",label:"详细",size:"mini"}]}]}}},mounted(){this.getNowTime(),console.log(this.tableHeight,"tableHeight")},created(){this.getTableData()},filters:{changeStatus(e){return console.log(e,"val"),e}},methods:{getNowTime(){var e=new Date,t=e.getFullYear(),a=e.getMonth(),l=e.getDate();a+=1,a=a.toString().padStart(2,"0"),l=l.toString().padStart(2,"0");var n=`${t}-${a}-${l}`;this.searchFrom["start_time"]=n,this.searchFrom["end_time"]=n},handleSizeChange(e){console.log(e,"handleSizeChange")},handleCurrentChange(e){console.log(e,"handleCurrentChange")},handButton(e){if("seeMaintain"===e.methods)console.log("查看");else{if("deleteMaintain"!==e.methods)return void console.log(e);console.log(e.index,"删除"),this.delete(e.index)}console.log(e)},delete(e){this.table.tableData.splice(e,1)},openDia(e){this.dialogVisible=!0,this.propsMsg=e},getTableData(){o.Z.get("/api/appcontrol/getdata").then((e=>{this.pagation.total=e.data.data.length,this.table.tableData=e.data.data,console.log(this.table.tableData,"this.tableData")}))}}},u=s,p=a(1001),d=(0,p.Z)(u,l,n,!1,null,null,null),c=d.exports}}]);