"use strict";(self["webpackJsonp_integratemenu"]=self["webpackJsonp_integratemenu"]||[]).push([[665],{5665:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-control"},[e._m(0),t("div",{staticClass:"app-control-nav"},[t("div",{staticClass:"table-control-search"},[t("el-form",{ref:"searchFrom",attrs:{model:e.searchFrom,inline:""}},[t("div",{staticClass:"search-left"},[t("el-form-item",{attrs:{label:"应用模块：",prop:"searchRegion"}},[t("el-select",{attrs:{placeholder:"请选择状态","popper-append-to-body":!1},model:{value:e.searchFrom.searchRegion,callback:function(t){e.$set(e.searchFrom,"searchRegion",t)},expression:"searchFrom.searchRegion"}},e._l(e.select,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{staticClass:"search-content"},[t("el-form-item",{attrs:{prop:"userId",label:"应用名称："}},[t("el-input",{model:{value:e.searchFrom.userId,callback:function(t){e.$set(e.searchFrom,"userId",t)},expression:"searchFrom.userId"}})],1)],1),t("div",{staticClass:"search-right"},[t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"}},[e._v("查询应用")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handCreate()}}},[e._v("添加应用")])],1)],1)])],1)]),t("div",{staticClass:"table-control-main"},[e._m(1),t("div",{staticClass:"m-content"},[t("el-table",{ref:"table",attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"row-key":e.tableData.menu_code,stripe:"","highlight-current-row":!0,border:"",id:"table",height:e.tableHeightComputed,width:"100%"}},[t("el-table-column",{attrs:{prop:"menu_code",align:"center",label:"菜单编码",width:"150px"}}),t("el-table-column",{attrs:{align:"center",width:"120px",prop:"menu_name",label:"菜单名称"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"two-line"},[e._v(e._s(a.row.menu_name))])]}}])}),t("el-table-column",{attrs:{align:"center",width:"120px",prop:"menu_icon",label:"菜单图标"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handDia(a.row)}}},[e._v("点击查看")])]}}])}),t("el-table-column",{attrs:{align:"center",width:"120px",prop:"go_url",label:"跳转地址"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handDia(a.row.go_url)}}},[e._v("点击查看")])]}}])}),t("el-table-column",{attrs:{width:"120px",align:"center",prop:"read_url",label:"访问地址"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handDia(a.row.read_url)}}},[e._v("点击查看")])]}}])}),t("el-table-column",{attrs:{align:"center",width:"120px",prop:"menu_type",label:"菜单类型",formatter:e.menu_type}}),t("el-table-column",{attrs:{align:"center",width:"120px",prop:"menu_sort",label:"菜单排序"}}),t("el-table-column",{attrs:{align:"center",width:"120px",prop:"fnot_color",label:"字体硕色"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"bgc-color",style:`background-color:${a.row.fnot_color};color:#fff`},[e._v(" "+e._s(a.row.fnot_color)+" ")])]}}])}),t("el-table-column",{attrs:{align:"center",label:"传参类型",prop:"params_type",width:"120px",formatter:e.params_type}}),t("el-table-column",{attrs:{align:"center",label:"加密类型",prop:"ency_type",width:"120px",formatter:e.ency_type}}),t("el-table-column",{attrs:{align:"center",label:"解密私钥",prop:"decode_key",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handDia(a.row.decode_key)}}},[e._v("点击查看")])]}}])}),t("el-table-column",{attrs:{align:"center",label:"操作密钥",width:"180px"}},[[t("div",{staticClass:"inline-flex"},[t("el-button",{attrs:{type:"success",size:"mini"}},[e._v("更新密钥")]),t("el-button",{attrs:{type:"success",size:"mini"}},[e._v("还原密钥")])],1)]],2),t("el-table-column",{attrs:{align:"center",label:"授权P",prop:"impower_ip",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handDia(a.row.impower_ip)}}},[e._v("点击查看")])]}}])}),t("el-table-column",{attrs:{align:"center",label:"模块名称",prop:"module_name",width:"120px"}}),t("el-table-column",{attrs:{align:"center",label:"应用名称",prop:"module_name",width:"120px"}}),t("el-table-column",{attrs:{align:"center",label:"菜单状态",prop:"menu_status",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.menu_status?t("el-button",{attrs:{type:"warning",size:"mini"}},[e._v(" 暂停使用")]):e._e(),1===a.row.menu_status?t("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("正在使用")]):e._e()]}}])}),t("el-table-column",{attrs:{align:"center",label:"消息类型",prop:"msg_type",width:"120px",formatter:e.msg_type}}),t("el-table-column",{attrs:{align:"center",label:"查询类型",prop:"search_type",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.search_type?t("span",[e._v("暂无查询")]):e._e(),1===a.row.search_type?t("span",[e._v("查询语句")]):e._e(),2===a.row.search_type?t("span",[e._v("调用接口")]):e._e()]}}])}),t("el-table-column",{attrs:{align:"center",label:"开始时间",prop:"start_time",width:"165px"}}),t("el-table-column",{attrs:{align:"center",label:"结束时间",prop:"end_time",width:"165px"}}),t("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handCreate(a.row)}}},[e._v("更新菜单")])]}}])})],1)],1),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),t("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"dia-content-img"},[e.propImg?t("img",{attrs:{src:e.propImg,alt:""}}):t("span",[e._v(e._s(e.propsMsg))])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),t("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"min-dialog",attrs:{title:e.title,visible:e.dialogVisibleCreate,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleCreate=t}}},[t("div",{staticClass:"dia-content"},[t("div",{staticClass:"dia-left"},[t("div",{staticClass:"item"},[t("p",[e._v("背景颜色：")]),t("div",{staticClass:"color",style:`background-color:${e.createSearchFrom.app_color};`})])]),t("div",{staticClass:"dia-right"},[t("el-form",{ref:"createSearchFrom",attrs:{"label-width":"100px",model:e.createSearchFrom,size:"mini"}},[t("el-form-item",{attrs:{label:"应用编码：",prop:"app_code"}},[t("el-input",{model:{value:e.createSearchFrom.app_code,callback:function(t){e.$set(e.createSearchFrom,"app_code",t)},expression:"createSearchFrom.app_code"}})],1),t("el-form-item",{attrs:{label:"应用名称：",prop:"app_name"}},[t("el-input",{model:{value:e.createSearchFrom.app_name,callback:function(t){e.$set(e.createSearchFrom,"app_name",t)},expression:"createSearchFrom.app_name"}})],1),t("el-form-item",{attrs:{label:"企业编码：",prop:"app_id"}},[t("el-input",{model:{value:e.createSearchFrom.app_id,callback:function(t){e.$set(e.createSearchFrom,"app_id",t)},expression:"createSearchFrom.app_id"}})],1),t("el-form-item",{attrs:{label:"应用密钥：",prop:"app_key"}},[t("el-input",{model:{value:e.createSearchFrom.app_key,callback:function(t){e.$set(e.createSearchFrom,"app_key",t)},expression:"createSearchFrom.app_key"}})],1),t("el-form-item",{attrs:{label:"请求地址：",prop:"app_url"}},[t("el-input",{model:{value:e.createSearchFrom.app_url,callback:function(t){e.$set(e.createSearchFrom,"app_url",t)},expression:"createSearchFrom.app_url"}})],1),t("el-form-item",{attrs:{label:"应用状态：",prop:"selectStatus"}},[t("el-select",{staticClass:"status",attrs:{placeholder:"请选择状态","popper-append-to-body":!1},model:{value:e.createSearchFrom.selectStatus,callback:function(t){e.$set(e.createSearchFrom,"selectStatus",t)},expression:"createSearchFrom.selectStatus"}},e._l(e.select,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"背景颜色：",prop:"app_color"}},[t("el-input",{model:{value:e.createSearchFrom.app_color,callback:function(t){e.$set(e.createSearchFrom,"app_color",t)},expression:"createSearchFrom.app_color"}}),t("el-color-picker",{attrs:{"color-format":"hex"},on:{"active-change":e.bgcChange},model:{value:e.createSearchFrom.app_color,callback:function(t){e.$set(e.createSearchFrom,"app_color",t)},expression:"createSearchFrom.app_color"}})],1),t("el-form-item",{attrs:{label:"显示个数：",prop:"show_number"}},[t("el-input",{model:{value:e.createSearchFrom.show_number,callback:function(t){e.$set(e.createSearchFrom,"show_number",t)},expression:"createSearchFrom.show_number"}})],1)],1)],1)]),t("el-dialog",{attrs:{width:"30%",title:"确认",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[t("p",[e._v("是否确认"+e._s(e.confirmMsg)+"?")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){e.innerVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.sendConfirm}},[e._v("确 定")])],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"info"},on:{click:e.createCancel}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.createConfirm}},[e._v("确 定")])],1)],1)],1)},l=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-control-header"},[t("p",[e._v("查询条件")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"m_text"},[t("p",[e._v("菜单管理")])])}],o=a(4471),i=a(2207),n={directives:{elDragDialog:i.Z},data(){return{dialogVisibleCreate:!1,title:"",createSearchFrom:{app_code:"",app_name:"",app_id:"",app_key:"",app_url:"",app_token:"",app_color:"#FFFFFF",show_number:"",selectStatus:""},selectStatus:[{id:1,label:"全部",value:""},{id:2,label:"已绑定",value:1},{id:3,label:"未绑定",value:0}],innerVisible:!1,confirmMsg:"",searchFrom:{searchRegion:"",searchName:"",searchPhone:"",userId:"",checkMana:""},select:[{id:1,label:"全部",value:""},{id:2,label:"已绑定",value:"1"},{id:3,label:"未绑定",value:"0"}],tableData:[],currentPage:1,pageSize:10,dialogVisible:!1,propsMsg:"",propImg:"",itemHeight:1,itemHeaderHeight:1,tableHeight:document.documentElement.clientHeight/1.8}},computed:{tableHeightComputed(){return console.log(this.tableHeight-this.itemHeaderHeight),this.tableHeight-this.itemHeaderHeight}},watch:{itemHeaderHeight(e,t){console.log(e,t),this.resize(e,t)}},mounted(){this.tableHeight=this.tableHeight-this.itemHeaderHeight,addEventListener("resize",this.resize)},destroyed(){removeEventListener("resize",this.resize)},created(){this.getTableData(),this.$nextTick((()=>{let e=document.documentElement.clientHeight,t=this.$refs["table"].$el.getBoundingClientRect().top;this.tableHeight=e-t-60,console.log(this.tableHeight,t,"this.tableHeight - this.itemHeaderHeight")}))},methods:{bgcChange(e){this.createSearchFrom.app_color=e},sendConfirm(){this.innerVisible=!1,this.dialogVisibleCreate=!1,this.resetForm()},createConfirm(){this.innerVisible=!0},createCancel(){this.dialogVisibleCreate=!1,this.resetForm()},handCreate(e){if(this.dialogVisibleCreate=!0,e){this.title="更新应用",this.confirmMsg="更新";const{app_code:t,app_color:a,app_id:r,app_key:l,app_name:o,app_token:i,app_url:n,show_number:s,status:c}=e;this.createSearchFrom={app_code:t,app_color:a,app_id:r,app_key:l,app_name:o,app_token:i,app_url:n,show_number:s,selectStatus:c}}else this.title="添加应用",this.confirmMsg="添加"},handleClose(e){this.$confirm("确认关闭？").then((()=>{e(),this.resetForm()})).catch((()=>{}))},resetForm(){this.createSearchFrom={app_code:"",app_name:"",app_id:"",app_key:"",app_url:"",app_token:"",app_color:"#FFFFFF",show_number:"",selectStatus:""}},resize(){let e=document.documentElement.clientHeight,t=this.$refs.table.$el.getBoundingClientRect().top;this.tableHeight=e-t-60},handDia(e){this.propImg=e.menu_icon,this.propsMsg=e,this.dialogVisible=!0},menu_type(e){return 0===e.menu_type?"部分可见":"全部可见"},params_type(e){return 0===e.params_type?"暂不传参":"需要传参"},ency_type(e){return 0===e.ency_type?"暂不加密":"需要加密"},msg_type(e){return 0===e.msg_type?"页面隐藏":"页面显示"},getTableData(){o.Z.get("/api/menucontrol/getdata").then((e=>{this.tableData=e.data.data,console.log(this.tableData,"this.menucontrol")}))},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.currentPage=e}}},s=n,c=a(1001),p=(0,c.Z)(s,r,l,!1,null,"12501518",null),u=p.exports},2207:function(e,t,a){a.d(t,{Z:function(){return i}});a(6699);var r={bind(e,t,a){const r=e.querySelector(".el-dialog__header"),l=e.querySelector(".el-dialog");r.style.cssText+=";cursor:move;",l.style.cssText+=";top:0px;";const o=function(){return window.document.currentStyle?(e,t)=>e.currentStyle[t]:(e,t)=>getComputedStyle(e,!1)[t]}();r.onmousedown=e=>{const t=e.clientX-r.offsetLeft,i=e.clientY-r.offsetTop,n=l.offsetWidth,s=l.offsetHeight,c=document.body.clientWidth,p=document.body.clientHeight,u=l.offsetLeft,m=c-l.offsetLeft-n,d=l.offsetTop,h=p-l.offsetTop-s;let _=o(l,"left"),b=o(l,"top");_.includes("%")?(_=+document.body.clientWidth*(+_.replace(/%/g,"")/100),b=+document.body.clientHeight*(+b.replace(/%/g,"")/100)):(_=+_.replace(/\px/g,""),b=+b.replace(/\px/g,"")),document.onmousemove=function(e){let r=e.clientX-t,o=e.clientY-i;-r>u?r=-u:r>m&&(r=m),-o>d?o=-d:o>h&&(o=h),l.style.cssText+=`;left:${r+_}px;top:${o+b}px;`,a.child.$emit("dragDialog")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}}},l=a(6369);const o=function(e){e.directive("el-drag-dialog",r)};window.Vue&&(window["el-drag-dialog"]=r,l["default"].use(o)),r.install=o;var i=r}}]);